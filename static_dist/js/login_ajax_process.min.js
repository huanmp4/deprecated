function Signin(){this.signinSubmitBtn=$("#signin-submit-btn"),this.signupSubmitBtn=$("#signup-submit-btn"),this.logOutNow=$(".log-out-now2"),this.signupButton=$(".signup-text"),this.wrapper=$(".mask-wrapper"),this.loginBtn=$(".login-text"),this.loginToggle=$(".switch"),this.logincloseBtn=$(".close-btn"),this.loginPrompt=$(".login-prompt"),this.signinGroup=$(".signin-group"),this.promptAccount=this.signinGroup.find(".prompt-account"),this.promptPassword=this.signinGroup.find(".prompt-password"),this.usernameBorder=this.signinGroup.find('input[name="username"]'),this.passwordBorder=this.signinGroup.find('input[name="password"]'),this.smsCaptchaBtn=$(".sms-captcha-btn"),this.signupGroup=$(".signup-group"),this.signupTelephone=this.signupGroup.find('input[name="telephone"]'),this.msCaptcha=this.signupGroup.find('input[name="img-captcha-code"]')}Signin.prototype.listenSendMessageEvent=function(){var i=this;i.smsCaptchaBtn.click(function(s){s.preventDefault();var o=i.signupTelephone.val(),n=i.msCaptcha.val();i.smsCaptchaBtn.unbind("click"),console.log("telephone",o),console.log("code",n);var e=10;i.smsCaptchaBtn.addClass("disableClass");var t=setInterval(function(){i.smsCaptchaBtn.text(e+"s"),(e-=1)<0&&(clearInterval(t),i.smsCaptchaBtn.text("发送验证码"),i.smsCaptchaBtn.removeClass("disableClass"),i.listenSendMessageEvent())},500);yourajax.get({url:"/register/send",data:{telephone:o,code:n},success:function(s){200===s.code?window.messageBox.show(s.message):311===s.code&&window.messageBox.show("未知错误1")},fail:function(s){console("错误",s)}})})},Signin.prototype.Otherwise=function(){this.logOutNow.css({cursor:"pointer"}),$(".log-out-now2").css({color:"black"})},Signin.prototype.signinPromptHideEvent=function(){var s=this;s.usernameBorder.css({border:"1px solid #ccc"}),s.passwordBorder.css({border:"1px solid #ccc"}),s.promptAccount.text(""),s.promptPassword.text(""),s.promptAccount.hide(),s.promptPassword.hide()},Signin.prototype.signinPromptShowEvent=function(){this.promptAccount.show(),this.promptPassword.show()},Signin.prototype.ListenClick=function(){var t=this;t.loginBtn.click(function(){t.wrapper.show(),t.loginPrompt.hide()}),t.signinSubmitBtn.click(function(s){console.log("submitBtn"),s.preventDefault();var o=t.signinGroup.find('input[name="username"]').val(),n=t.signinGroup.find('input[name="password"]').val();console.log("username",o),t.signinPromptHideEvent(),t.signinPromptShowEvent(),yourajax.post({url:"/register/loginView",data:{username:o,password:n},success:function(s){if(console.log("result总信息",s),200===s.code)window.messageBox.show("成功登录"),window.location.reload();else if(301===s.code)t.promptPassword.text(s.message),t.passwordBorder.css({border:"1px solid red"});else if(302===s.code)t.promptAccount.text(s.message),t.usernameBorder.css({border:"1px solid red"});else if(401===s.code)t.promptPassword.text("code:401",s.message),t.passwordBorder.css({border:"1px solid red"});else{console.log("else");var o=s.message;for(var n in console.log("other messing",o),o){var e=o[n][0];"username"===n?(t.promptAccount.text(e),t.usernameBorder.css({border:"1px solid red"})):"password"===n?(t.promptPassword.text(e),t.passwordBorder.css({border:"1px solid red"})):this.promptAccount.text("错误,请联系管理员,代码3301")}}},fail:function(s){console.log(s)}})}),t.logOutNow.click(function(s){console.log("logoutClick"),s.preventDefault(),yourajax.post({url:"/register/logoutView",success:function(){console.log("成功"),window.location.reload()}})}),t.signupButton.click(function(){var s=$(".mask-wrapper");$(".scroll-wrapper").css({left:"-400px"}),s.show()}),t.signupGroup=$(".input-group-addon"),t.imageCaptcha=t.signupGroup.find('img[class="img-captcha"]'),t.imageCaptcha.click(function(){var s="/register/img_captcha/?random="+Math.random();console.log("randomNum:",s),t.imageCaptcha.attr("src",s)}),t.signupSubmitBtn.click(function(s){console.log("submitBtn"),s.preventDefault();var o=$(".signup-group"),n=o.find('input[name="username"]').val(),e=o.find('input[name="telephone"]').val(),t=o.find('input[name="password1"]').val(),i=o.find('input[name="password2"]').val(),r=o.find('input[name="sms_captcha"]').val();yourajax.post({url:"/register/signupView",data:{username:n,telephone:e,password1:t,password2:i,telephone_code:r},success:function(s){if(200===s.code)window.messageBox.show("注册成功"),window.location.reload();else if(311===s.code)window.messageBox.show(s.message);else{var o=s.message;"String"==o||o.constructor==String?window.messageBox.show(o):console.log("messageObject",o)}},fail:function(s){console.log(s)}})}),t.logincloseBtn.click(function(){t.wrapper.hide(),t.signinPromptHideEvent()}),t.loginToggle.click(function(){var s=$(".scroll-wrapper"),o=s.css("left"),n=$(".auth-wrapper");console.log("scrollLeft:",o);var e=parseInt(o);console.log("scrollLeftNum:",e),-400===e&&(s.animate({left:"0px"},500),n.css({"margin-top":"-180px"})),0===e&&(s.animate({left:"-400px"},500),n.css({"margin-top":"-260px"})),t.signinPromptHideEvent()})},$(function(){var s=new Signin;s.ListenClick(),s.Otherwise(),s.listenSendMessageEvent()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luX2FqYXhfcHJvY2Vzcy5qcyJdLCJuYW1lcyI6WyJTaWduaW4iLCJ0aGlzIiwic2lnbmluU3VibWl0QnRuIiwiJCIsInNpZ251cFN1Ym1pdEJ0biIsImxvZ091dE5vdyIsInNpZ251cEJ1dHRvbiIsIndyYXBwZXIiLCJsb2dpbkJ0biIsImxvZ2luVG9nZ2xlIiwibG9naW5jbG9zZUJ0biIsImxvZ2luUHJvbXB0Iiwic2lnbmluR3JvdXAiLCJwcm9tcHRBY2NvdW50IiwiZmluZCIsInByb21wdFBhc3N3b3JkIiwidXNlcm5hbWVCb3JkZXIiLCJwYXNzd29yZEJvcmRlciIsInNtc0NhcHRjaGFCdG4iLCJzaWdudXBHcm91cCIsInNpZ251cFRlbGVwaG9uZSIsIm1zQ2FwdGNoYSIsInByb3RvdHlwZSIsImxpc3RlblNlbmRNZXNzYWdlRXZlbnQiLCJzZWxmIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic2lnbnVwVGVsZXBob25lTnVtIiwidmFsIiwibXNjYXB0Y2hhTnVtIiwidW5iaW5kIiwiY29uc29sZSIsImxvZyIsImNvdW50IiwiYWRkQ2xhc3MiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsInlvdXJhamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInRlbGVwaG9uZSIsImNvZGUiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3ciLCJmYWlsIiwiZXJyb3IiLCJPdGhlcndpc2UiLCJjc3MiLCJjdXJzb3IiLCJjb2xvciIsInNpZ25pblByb21wdEhpZGVFdmVudCIsImJvcmRlciIsImhpZGUiLCJzaWduaW5Qcm9tcHRTaG93RXZlbnQiLCJMaXN0ZW5DbGljayIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJwb3N0IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlT2JqZWN0Iiwia2V5IiwibWVzc2FnZSIsIm1hc2tfd3JhcHBlciIsImxlZnQiLCJpbWFnZUNhcHRjaGEiLCJyYW5kb21OdW0iLCJNYXRoIiwicmFuZG9tIiwiYXR0ciIsInNpZ251cF9ncm91cCIsInVzZXJuYW1lX3RlbXAiLCJ0ZWxlcGhvbmVfdGVtcCIsInBhc3N3b3JkX3RlbXAxIiwicGFzc3dvcmRfdGVtcDIiLCJ0ZWxlcGhvbmVfY29kZSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsImNvbnN0cnVjdG9yIiwiU3RyaW5nIiwic2Nyb2xsIiwic2Nyb2xsTGVmdCIsImhlaWdodE51bSIsInNjcm9sbExlZnROdW0iLCJwYXJzZUludCIsImFuaW1hdGUiLCJtYXJnaW4tdG9wIiwic2lnbmluIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxTQUNMQyxLQUFLQyxnQkFBa0JDLEVBQUUsc0JBQ3pCRixLQUFLRyxnQkFBa0JELEVBQUUsc0JBQ3pCRixLQUFLSSxVQUFZRixFQUFFLGlCQUNuQkYsS0FBS0ssYUFBZUgsRUFBRSxnQkFDdEJGLEtBQUtNLFFBQVVKLEVBQUUsaUJBQ2pCRixLQUFLTyxTQUFXTCxFQUFFLGVBQ2xCRixLQUFLUSxZQUFjTixFQUFFLFdBQ3JCRixLQUFLUyxjQUFnQlAsRUFBRSxjQUN2QkYsS0FBS1UsWUFBY1IsRUFBRSxpQkFDckJGLEtBQUtXLFlBQWNULEVBQUUsaUJBQ3JCRixLQUFLWSxjQUFnQlosS0FBS1csWUFBWUUsS0FBSyxtQkFDM0NiLEtBQUtjLGVBQWlCZCxLQUFLVyxZQUFZRSxLQUFLLG9CQUM1Q2IsS0FBS2UsZUFBaUJmLEtBQUtXLFlBQVlFLEtBQUssMEJBQzVDYixLQUFLZ0IsZUFBaUJoQixLQUFLVyxZQUFZRSxLQUFLLDBCQUM1Q2IsS0FBS2lCLGNBQWdCZixFQUFFLG9CQUN2QkYsS0FBS2tCLFlBQWNoQixFQUFFLGlCQUNyQkYsS0FBS21CLGdCQUFrQm5CLEtBQUtrQixZQUFZTCxLQUFLLDJCQUM3Q2IsS0FBS29CLFVBQVlwQixLQUFLa0IsWUFBWUwsS0FBSyxrQ0FRM0NkLE9BQU9zQixVQUFVQyx1QkFBeUIsV0FDdEMsSUFBSUMsRUFB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LGFBQWEsWUFFaEN0RSxFQUFLa0MsMkJBSWJ2RCxFQUFFLFdBQ0UsSUFBSTRGLEVBQVMsSUFBSS9GLE9BQ2pCK0YsRUFBT2pDLGNBQ1BpQyxFQUFPekMsWUFDUHlDLEVBQU94RSIsImZpbGUiOiJsb2dpbl9hamF4X3Byb2Nlc3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gU2lnbmluKCl7XHJcbiAgICB0aGlzLnNpZ25pblN1Ym1pdEJ0biA9ICQoJyNzaWduaW4tc3VibWl0LWJ0bicpO1xyXG4gICAgdGhpcy5zaWdudXBTdWJtaXRCdG4gPSAkKCcjc2lnbnVwLXN1Ym1pdC1idG4nKTtcclxuICAgIHRoaXMubG9nT3V0Tm93ID0gJCgnLmxvZy1vdXQtbm93MicpO1xyXG4gICAgdGhpcy5zaWdudXBCdXR0b24gPSAkKCcuc2lnbnVwLXRleHQnKTtcclxuICAgIHRoaXMud3JhcHBlciA9ICQoJy5tYXNrLXdyYXBwZXInKTtcclxuICAgIHRoaXMubG9naW5CdG4gPSAkKCcubG9naW4tdGV4dCcpO1xyXG4gICAgdGhpcy5sb2dpblRvZ2dsZSA9ICQoJy5zd2l0Y2gnKTtcclxuICAgIHRoaXMubG9naW5jbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgIHRoaXMubG9naW5Qcm9tcHQgPSAkKCcubG9naW4tcHJvbXB0Jyk7XHJcbiAgICB0aGlzLnNpZ25pbkdyb3VwID0gJCgnLnNpZ25pbi1ncm91cCcpO1xyXG4gICAgdGhpcy5wcm9tcHRBY2NvdW50ID0gdGhpcy5zaWduaW5Hcm91cC5maW5kKCcucHJvbXB0LWFjY291bnQnKTtcclxuICAgIHRoaXMucHJvbXB0UGFzc3dvcmQgPSB0aGlzLnNpZ25pbkdyb3VwLmZpbmQoJy5wcm9tcHQtcGFzc3dvcmQnKTtcclxuICAgIHRoaXMudXNlcm5hbWVCb3JkZXIgPSB0aGlzLnNpZ25pbkdyb3VwLmZpbmQoJ2lucHV0W25hbWU9XCJ1c2VybmFtZVwiXScpO1xyXG4gICAgdGhpcy5wYXNzd29yZEJvcmRlciA9IHRoaXMuc2lnbmluR3JvdXAuZmluZCgnaW5wdXRbbmFtZT1cInBhc3N3b3JkXCJdJyk7XHJcbiAgICB0aGlzLnNtc0NhcHRjaGFCdG4gPSAkKCcuc21zLWNhcHRjaGEtYnRuJyk7XHJcbiAgICB0aGlzLnNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xyXG4gICAgdGhpcy5zaWdudXBUZWxlcGhvbmUgPSB0aGlzLnNpZ251cEdyb3VwLmZpbmQoJ2lucHV0W25hbWU9XCJ0ZWxlcGhvbmVcIl0nKTtcclxuICAgIHRoaXMubXNDYXB0Y2hhID0gdGhpcy5zaWdudXBHcm91cC5maW5kKCdpbnB1dFtuYW1lPVwiaW1nLWNhcHRjaGEtY29kZVwiXScpO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy/lj5HpgIHpqozor4HnoIHngrnlh7tcclxuU2lnbmluLnByb3RvdHlwZS5saXN0ZW5TZW5kTWVzc2FnZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuc21zQ2FwdGNoYUJ0bi5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgc2lnbnVwVGVsZXBob25lTnVtID0gc2VsZi5zaWdudXBUZWxlcGhvbmUudmFsKCk7XHJcbiAgICAgICAgdmFyIG1zY2FwdGNoYU51bSA9ICBzZWxmLm1zQ2FwdGNoYS52YWwoKTtcclxuICAgICAgICBzZWxmLnNtc0NhcHRjaGFCdG4udW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZWxlcGhvbmUnLHNpZ251cFRlbGVwaG9uZU51bSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvZGUnLG1zY2FwdGNoYU51bSk7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMTA7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQnRuLmFkZENsYXNzKCdkaXNhYmxlQ2xhc3MnKTtcclxuICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGFCdG4udGV4dChjb3VudCsncycpO1xyXG4gICAgICAgICAgICBjb3VudCAtPSAxO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPCAwKXtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQnRuLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQnRuLnJlbW92ZUNsYXNzKCdkaXNhYmxlQ2xhc3MnKTtcclxuICAgICAgICAgICAgICAgIHNlbGYubGlzdGVuU2VuZE1lc3NhZ2VFdmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICAgIHlvdXJhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvcmVnaXN0ZXIvc2VuZCcsXHJcbiAgICAgICAgICAgICdkYXRhJzp7J3RlbGVwaG9uZSc6c2lnbnVwVGVsZXBob25lTnVtLCdjb2RlJzptc2NhcHRjaGFOdW19LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdFsnY29kZSddID09PSAzMTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+acquefpemUmeivrzEnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZSgn6ZSZ6K+vJyxlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5cclxuU2lnbmluLnByb3RvdHlwZS5PdGhlcndpc2UgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5sb2dPdXROb3cuY3NzKHsnY3Vyc29yJzoncG9pbnRlcid9KTtcclxuICAgIHZhciBsb2dPdXROb3cyID0gJCgnLmxvZy1vdXQtbm93MicpO1xyXG4gICAgbG9nT3V0Tm93Mi5jc3Moeydjb2xvcic6J2JsYWNrJ30pXHJcbn07XHJcblxyXG5cclxuU2lnbmluLnByb3RvdHlwZS5zaWduaW5Qcm9tcHRIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi51c2VybmFtZUJvcmRlci5jc3Moeydib3JkZXInOicxcHggc29saWQgI2NjYyd9KTtcclxuICAgIHNlbGYucGFzc3dvcmRCb3JkZXIuY3NzKHsnYm9yZGVyJzonMXB4IHNvbGlkICNjY2MnfSk7XHJcbiAgICBzZWxmLnByb21wdEFjY291bnQudGV4dCgnJyk7XHJcbiAgICBzZWxmLnByb21wdFBhc3N3b3JkLnRleHQoJycpO1xyXG4gICAgc2VsZi5wcm9tcHRBY2NvdW50LmhpZGUoKTtcclxuICAgIHNlbGYucHJvbXB0UGFzc3dvcmQuaGlkZSgpO1xyXG59O1xyXG5cclxuU2lnbmluLnByb3RvdHlwZS5zaWduaW5Qcm9tcHRTaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wcm9tcHRBY2NvdW50LnNob3coKTtcclxuICAgIHNlbGYucHJvbXB0UGFzc3dvcmQuc2hvdygpO1xyXG59O1xyXG5cclxuXHJcblxyXG4vL+aJgOacieeZu+W9leazqOWGjOebkeWQrOaXtumXtFxyXG5TaWduaW4ucHJvdG90eXBlLkxpc3RlbkNsaWNrID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvL21hc2vnmbvlvZXoj5zljZXmmL7npLpcclxuICAgIHNlbGYubG9naW5CdG4uY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi53cmFwcGVyLnNob3coKTtcclxuICAgICAgICBzZWxmLmxvZ2luUHJvbXB0LmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v55m75b2V5oyJ6ZKuXHJcbiAgICBzZWxmLnNpZ25pblN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdEJ0bicpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gc2VsZi5zaWduaW5Hcm91cC5maW5kKCdpbnB1dFtuYW1lPVwidXNlcm5hbWVcIl0nKS52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBzZWxmLnNpZ25pbkdyb3VwLmZpbmQoJ2lucHV0W25hbWU9XCJwYXNzd29yZFwiXScpLnZhbCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VybmFtZScsdXNlcm5hbWUpO1xyXG4gICAgICAgIHNlbGYuc2lnbmluUHJvbXB0SGlkZUV2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zaWduaW5Qcm9tcHRTaG93RXZlbnQoKTtcclxuXHJcbiAgICAgICAgeW91cmFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvcmVnaXN0ZXIvbG9naW5WaWV3JyxcclxuICAgICAgICAgICAgJ2RhdGEnOnsndXNlcm5hbWUnOnVzZXJuYW1lLCdwYXNzd29yZCc6cGFzc3dvcmR9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHTmgLvkv6Hmga8nLHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygn5oiQ5Yqf55m75b2VJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMzAxKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb21wdFBhc3N3b3JkLnRleHQocmVzdWx0WydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmRCb3JkZXIuY3NzKHsnYm9yZGVyJzonMXB4IHNvbGlkIHJlZCd9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzdWx0Wydjb2RlJ10gPT09IDMwMil7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9tcHRBY2NvdW50LnRleHQocmVzdWx0WydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudXNlcm5hbWVCb3JkZXIuY3NzKHsnYm9yZGVyJzonMXB4IHNvbGlkIHJlZCd9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzdWx0Wydjb2RlJ10gPT09IDQwMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9tcHRQYXNzd29yZC50ZXh0KCdjb2RlOjQwMScscmVzdWx0WydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmRCb3JkZXIuY3NzKHsnYm9yZGVyJzonMXB4IHNvbGlkIHJlZCd9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vsc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvdGhlciBtZXNzaW5nJyxtZXNzYWdlT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWVzc2FnZU9iamVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXkgPT09ICd1c2VybmFtZScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9tcHRBY2NvdW50LnRleHQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVzZXJuYW1lQm9yZGVyLmNzcyh7J2JvcmRlcic6JzFweCBzb2xpZCByZWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIGtleSA9PT0gJ3Bhc3N3b3JkJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb21wdFBhc3N3b3JkLnRleHQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkQm9yZGVyLmNzcyh7J2JvcmRlcic6JzFweCBzb2xpZCByZWQnfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRBY2NvdW50LnRleHQoJ+mUmeivryzor7fogZTns7vnrqHnkIblkZgs5Luj56CBMzMwMScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/pgIDlh7rnmbvlvZVcclxuICAgIHNlbGYubG9nT3V0Tm93LmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBjb25zb2xlLmxvZygnbG9nb3V0Q2xpY2snKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHlvdXJhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9yZWdpc3Rlci9sb2dvdXRWaWV3JyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+azqOWGjOeCueWHu+WxleW8gFxyXG4gICAgc2VsZi5zaWdudXBCdXR0b24uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgbWFza193cmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xyXG4gICAgICAgIHZhciBzY3JvbGwgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgICAgICBzY3JvbGwuY3NzKHsnbGVmdCc6Jy00MDBweCd9KTtcclxuICAgICAgICBtYXNrX3dyYXBwZXIuc2hvdygpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v5Zu+54mH6aqM6K+B56CB54K55Ye7XHJcbiAgICBzZWxmLnNpZ251cEdyb3VwID0gJCgnLmlucHV0LWdyb3VwLWFkZG9uJyk7XHJcbiAgICBzZWxmLmltYWdlQ2FwdGNoYSA9IHNlbGYuc2lnbnVwR3JvdXAuZmluZCgnaW1nW2NsYXNzPVwiaW1nLWNhcHRjaGFcIl0nKTtcclxuICAgIHNlbGYuaW1hZ2VDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHJhbmRvbU51bSA9IFwiL3JlZ2lzdGVyL2ltZ19jYXB0Y2hhL1wiK1wiP3JhbmRvbT1cIitNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyYW5kb21OdW06JyxyYW5kb21OdW0pO1xyXG4gICAgICAgIHNlbGYuaW1hZ2VDYXB0Y2hhLmF0dHIoJ3NyYycscmFuZG9tTnVtKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8v5rOo5YaM55m75b2V5oyJ6ZKuXHJcbiAgICBzZWxmLnNpZ251cFN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdEJ0bicpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHNpZ251cF9ncm91cCA9ICQoJy5zaWdudXAtZ3JvdXAnKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVfdGVtcCA9IHNpZ251cF9ncm91cC5maW5kKCdpbnB1dFtuYW1lPVwidXNlcm5hbWVcIl0nKS52YWwoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lX3RlbXAgPSBzaWdudXBfZ3JvdXAuZmluZCgnaW5wdXRbbmFtZT1cInRlbGVwaG9uZVwiXScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZF90ZW1wMSA9IHNpZ251cF9ncm91cC5maW5kKCdpbnB1dFtuYW1lPVwicGFzc3dvcmQxXCJdJykudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkX3RlbXAyID0gc2lnbnVwX2dyb3VwLmZpbmQoJ2lucHV0W25hbWU9XCJwYXNzd29yZDJcIl0nKS52YWwoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lX2NvZGUgPSBzaWdudXBfZ3JvdXAuZmluZCgnaW5wdXRbbmFtZT1cInNtc19jYXB0Y2hhXCJdJykudmFsKCk7XHJcbiAgICAgICAgeW91cmFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvcmVnaXN0ZXIvc2lnbnVwVmlldycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7J3VzZXJuYW1lJzp1c2VybmFtZV90ZW1wLCd0ZWxlcGhvbmUnOnRlbGVwaG9uZV90ZW1wLCdwYXNzd29yZDEnOnBhc3N3b3JkX3RlbXAxLCdwYXNzd29yZDInOnBhc3N3b3JkX3RlbXAyLCd0ZWxlcGhvbmVfY29kZSc6dGVsZXBob25lX2NvZGV9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCfms6jlhozmiJDlip8nKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMzExKXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZU9iamVjdCA9PSAnU3RyaW5nJyB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09IFN0cmluZyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbWVzc2FnZU9iamVjdCcsbWVzc2FnZU9iamVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aJk+WNsOWHuuadpVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uKGVycm9yKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIC8v5YWz6Zet55m75b2V5rOo5YaM5qGGXHJcbiAgICBzZWxmLmxvZ2luY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLndyYXBwZXIuaGlkZSgpO1xyXG4gICAgICAgIHNlbGYuc2lnbmluUHJvbXB0SGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+eZu+W9leazqOWGjOWIh+aNolxyXG4gICAgc2VsZi5sb2dpblRvZ2dsZS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzY3JvbGwgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHNjcm9sbC5jc3MoJ2xlZnQnKTtcclxuICAgICAgICB2YXIgaGVpZ2h0TnVtID0gJCgnLmF1dGgtd3JhcHBlcicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxMZWZ0Oicsc2Nyb2xsTGVmdCk7XHJcbiAgICAgICAgdmFyIHNjcm9sbExlZnROdW0gPSBwYXJzZUludChzY3JvbGxMZWZ0KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsTGVmdE51bTonLHNjcm9sbExlZnROdW0pO1xyXG4gICAgICAgIGlmIChzY3JvbGxMZWZ0TnVtID09PSAtNDAwKXtcclxuICAgICAgICAgICAgc2Nyb2xsLmFuaW1hdGUoeydsZWZ0JzonMHB4J30sNTAwKTtcclxuICAgICAgICAgICAgaGVpZ2h0TnVtLmNzcyh7J21hcmdpbi10b3AnOictMTgwcHgnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHNjcm9sbExlZnROdW0gPT09IDApe1xyXG4gICAgICAgICAgICBzY3JvbGwuYW5pbWF0ZSh7J2xlZnQnOictNDAwcHgnfSw1MDApO1xyXG4gICAgICAgICAgICBoZWlnaHROdW0uY3NzKHsnbWFyZ2luLXRvcCc6Jy0yNjBweCd9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5zaWduaW5Qcm9tcHRIaWRlRXZlbnQoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNpZ25pbiA9IG5ldyBTaWduaW4oKTtcclxuICAgIHNpZ25pbi5MaXN0ZW5DbGljaygpO1xyXG4gICAgc2lnbmluLk90aGVyd2lzZSgpO1xyXG4gICAgc2lnbmluLmxpc3RlblNlbmRNZXNzYWdlRXZlbnQoKTtcclxuXHJcbn0pOyJdfQ==
