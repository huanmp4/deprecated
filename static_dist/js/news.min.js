function News(){this.commentImmediately=$("#submit-immediately"),this.loadMorBtnMS=$("#load-more-btn")}News.prototype.listencommentImmediately=function(){var s=this;s.commentImmediately.click(function(e){e.preventDefault();var t=s.commentImmediately.parent().attr("data-news-id"),n=s.commentImmediately.parent().attr("data-news-author"),o=s.commentImmediately.parent().parent().find('textarea[name="comment"]').val(),a=$(".comment-list");console.log("pk",t),console.log("author",n),console.log("text_value",o),yourajax.post({url:"/news/news_comment",data:{news:t,author:n,comment:o},success:function(e){if(200===e.code){console.log(e.data);var t=e.data;window.messageBox.show("success");var n=template("comment-template",{comments:t});a.prepend(n)}}})})},News.prototype.getTimeEvent=function(){template.defaults.imports.time_since=function(e){var t=new Date(e),n=t.getTime(),o=((new Date).getTime()-n)/1e3;return console.log("date",o),o<=60?"刚刚":60<o&&o<=3600?(minutes=parseInt(o/60),minutes+"分钟前"):3600<o&&o<=86400?(hours=parseInt(o/60/60),hours+"小时前"):86400<o&&o<=2592e3?(days=parseInt(o/60/60/24),days+"天前"):(year=t.getFullYear(),month=t.getMonth(),day=t.getDay(),hour=t.getHours(),minute=t.getMinutes(),wholeDate=year+"/"+month+"/"+day+"/ "+hour+"时"+minute+"分",wholeDate)}},News.prototype.listenMoreNewsBtnMs=function(){var o=1;console.log("跑过来"),this.loadMorBtnMS.click(function(e){e.preventDefault(),console.log("2"),yourajax.get({url:"/news/news_list",data:{p:o},success:function(e){if(200===e.code){console.log("data.message",e.data.news),console.log("data.message",e.data.news);var t=e.data.news,n=template("template_each",{newses:t});console.log("跑temp",n),$(".list-inner-group").append(n),o+=1}}})})},News.prototype.Run=function(){this.getTimeEvent(),this.listencommentImmediately(),this.listenMoreNewsBtnMs()},$(function(){(new News).Run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJjb21tZW50SW1tZWRpYXRlbHkiLCIkIiwibG9hZE1vckJ0bk1TIiwicHJvdG90eXBlIiwibGlzdGVuY29tbWVudEltbWVkaWF0ZWx5Iiwic2VsZiIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwicGFyZW50IiwiYXR0ciIsImF1dGhvciIsImNvbW1lbnQiLCJmaW5kIiwidmFsIiwiY29tbWVudFVsTGlzdCIsImNvbnNvbGUiLCJsb2ciLCJ5b3VyYWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwibmV3cyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb21tZW50cyIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93IiwidGVtcCIsInRlbXBsYXRlIiwicHJlcGVuZCIsImdldFRpbWVFdmVudCIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVfc2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlU291cmNlIiwiRGF0ZSIsImRhdGVUaW1lc3RhbXAiLCJnZXRUaW1lIiwiZGF0ZSIsIm1pbnV0ZXMiLCJwYXJzZUludCIsImhvdXJzIiwiZGF5cyIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXkiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGUiLCJnZXRNaW51dGVzIiwid2hvbGVEYXRlIiwibGlzdGVuTW9yZU5ld3NCdG5NcyIsInBhZ2VzIiwiZ2V0IiwicCIsImRhdGFzIiwibmV3c2VzIiwiYXBwZW5kIiwiUnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUNMQyxLQUFLQyxtQkFBcUJDLEVBQUUsdUJBQzVCRixLQUFLRyxhQUFlRCxFQUFFLGtCQU0xQkgsS0FBS0ssVUFBVUMseUJBQTJCLFdBQ3RDLElBQUlDLEVBQU9OLEtBQ1hNLEVBQUtMLG1CQUFtQk0sTUFBTSxTQUFTQyxHQUNuQ0EsRUFBTUMsaUJBQ04sSUFBSUMsRUFBSUosRUFBS0wsbUJBQW1CVSxTQUFTQyxLQUFLLGdCQUMxQ0MsRUFBUVAsRUFBS0wsbUJBQW1CVSxTQUFTQyxLQUFLLG9CQUU5Q0UsRUFET1IsRUFBS0wsbUJBQW1CVSxTQUFTQSxTQUFTSSxLQUFLLDRCQUN2Q0MsTUFDZkMsRUFBZ0JmLEVBQUUsaUJBQ3RCZ0IsUUFBUUMsSUFBSSxLQUFLVCxHQUNqQlEsUUFBUUMsSUFBSSxTQUFTTixHQUNyQkssUUFBUUMsSUFBSSxhQUFhTCxHQUN6Qk0sU0FBU0MsS0FBSyxDQUNWQyxJQUFNLHFCQUNOQyxLQUFPLENBQUNDLEtBQU9kLEVBQUdHLE9BQVNBLEVBQU9DLFFBQVVBLEdBQzVDVyxRQUFVLFNBQVNDLEdBQ2YsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVSxDQUN2QlIsUUFBUUMsSUFBSU8sRUFBYSxNQUN6QixJQUFJQyxFQUFXRCxFQUFhLEtBQzVCRSxPQUFPQyxXQUFXQyxLQUFLLFdBQ3ZCLElBQUlDLEVBQU9DLFNBQVMsbUJBQW1CLENBQUNMLFNBQVdBLElBQ25EVixFQUFjZ0IsUUFBUUYsVUFTMUNoQyxLQUFLSyxVQUFVOEIsYUFBZSxXQUMxQkYsU0FBU0csU0FBU0MsUUFBUUMsV0FBYSxTQUFTQyxHQUM1QyxJQUFJQyxFQUFhLElBQUlDLEtBQUtGLEdBQ3RCRyxFQUFnQkYsRUFBV0csVUFHM0JDLElBRlEsSUFBSUgsTUFBT0UsVUFFSkQsR0FBaUIsSUFFcEMsT0FEQXZCLFFBQVFDLElBQUksT0FBT3dCLEdBQ2ZBLEdBQVEsR0FDRCxLQUNLLEdBQVBBLEdBQWFBLEdBQVEsTUFDMUJDLFFBQVVDLFNBQVVGLEVBQUssSUFDbEJDLFFBQVUsT0FDTCxLQUFQRCxHQUFnQkEsR0FBUSxPQUM3QkcsTUFBUUQsU0FBU0YsRUFBSyxHQUFHLElBQ2xCRyxNQUFRLE9BQ0gsTUFBUEgsR0FBbUJBLEdBQVEsUUFDaENJLEtBQU9GLFNBQVNGLEVBQUssR0FBRyxHQUFHLElBQ3BCSSxLQUFPLE9BRWRDLEtBQU9ULEVBQVdVLGNBQ2xCQyxNQUFRWCxFQUFXWSxXQUNuQkMsSUFBTWIsRUFBV2MsU0FDakJDLEtBQU9mLEVBQVdnQixXQUNsQkMsT0FBU2pCLEVBQVdrQixhQUNwQkMsVUFBYVYsS0FBTyxJQUFNRSxNQUFRLElBQU1FLElBQU0sS0FBWUUsS0FBTyxJQUFNRSxPQUFTLElBQ3pFRSxhQU1uQjNELEtBQUtLLFVBQVV1RCxvQkFBc0IsV0FDakMsSUFDSUMsRUFBUSxFQUVaMUMsUUFBUUMsSUFBSSxPQUhEbkIsS0FJTkcsYUFBYUksTUFBTSxTQUFTQyxHQUM3QkEsRUFBTUMsaUJBQ05TLFFBQVFDLElBQUksS0FDWkMsU0FBU3lDLElBQUksQ0FDVHZDLElBQU0sa0JBQ05DLEtBQU8sQ0FBQ3VDLEVBQUlGLEdBQ1puQyxRQUFVLFNBQVNDLEdBQ2YsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVSxDQUN2QlIsUUFBUUMsSUFBSSxlQUFlTyxFQUFPSCxLQUFLQyxNQUN2Q04sUUFBUUMsSUFBSSxlQUFlTyxFQUFPSCxLQUFLQyxNQUN2QyxJQUFJdUMsRUFBUXJDLEVBQWEsS0FBUSxLQUM3QkssRUFBT0MsU0FBUyxnQkFBZ0IsQ0FBQ2dDLE9BQVNELElBQzlDN0MsUUFBUUMsSUFBSSxRQUFRWSxHQUVMN0IsRUFBRSxxQkFDUitELE9BQU9sQyxHQUNoQjZCLEdBQVMsU0FTN0I3RCxLQUFLSyxVQUFVOEQsSUFBTSxXQUNqQmxFLEtBQUtrQyxlQUNMbEMsS0FBS0ssMkJBQ0xMLEtBQUsyRCx1QkFJVHpELEVBQUUsWUFDYSxJQUFJSCxNQUNWbUUiLCJmaWxlIjoibmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCl7XHJcbiAgICB0aGlzLmNvbW1lbnRJbW1lZGlhdGVseSA9ICQoJyNzdWJtaXQtaW1tZWRpYXRlbHknKTtcclxuICAgIHRoaXMubG9hZE1vckJ0bk1TID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuY29tbWVudEltbWVkaWF0ZWx5ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuY29tbWVudEltbWVkaWF0ZWx5LmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBwayA9c2VsZi5jb21tZW50SW1tZWRpYXRlbHkucGFyZW50KCkuYXR0cignZGF0YS1uZXdzLWlkJyk7XHJcbiAgICAgICAgdmFyIGF1dGhvciA9c2VsZi5jb21tZW50SW1tZWRpYXRlbHkucGFyZW50KCkuYXR0cignZGF0YS1uZXdzLWF1dGhvcicpO1xyXG4gICAgICAgIHZhciB0ZXh0ID0gc2VsZi5jb21tZW50SW1tZWRpYXRlbHkucGFyZW50KCkucGFyZW50KCkuZmluZCgndGV4dGFyZWFbbmFtZT1cImNvbW1lbnRcIl0nKTtcclxuICAgICAgICB2YXIgY29tbWVudCA9IHRleHQudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbW1lbnRVbExpc3QgPSAkKCcuY29tbWVudC1saXN0Jyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3BrJyxwayk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2F1dGhvcicsYXV0aG9yKTtcclxuICAgICAgICBjb25zb2xlLmxvZygndGV4dF92YWx1ZScsY29tbWVudCk7XHJcbiAgICAgICAgeW91cmFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9uZXdzX2NvbW1lbnQnLFxyXG4gICAgICAgICAgICAnZGF0YSc6eyduZXdzJzpwaywnYXV0aG9yJzphdXRob3IsJ2NvbW1lbnQnOmNvbW1lbnR9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbJ2RhdGEnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gdGVtcGxhdGUoJ2NvbW1lbnQtdGVtcGxhdGUnLHsnY29tbWVudHMnOmNvbW1lbnRzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWVudFVsTGlzdC5wcmVwZW5kKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLmdldFRpbWVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVfc2luY2UgPSBmdW5jdGlvbihkYXRlVmFsdWUpe1xyXG4gICAgICAgIHZhciBkYXRlU291cmNlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgICAgICB2YXIgZGF0ZVRpbWVzdGFtcCA9IGRhdGVTb3VyY2UuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciB0aW1lID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGUgPSAodGltZSAtIGRhdGVUaW1lc3RhbXApIC8gMTAwMDtcclxuICAgICAgICBjb25zb2xlLmxvZygnZGF0ZScsZGF0ZSk7XHJcbiAgICAgICAgaWYgKGRhdGUgPD0gNjApe1xyXG4gICAgICAgICAgICByZXR1cm4gJ+WImuWImidcclxuICAgICAgICB9ZWxzZSBpZihkYXRlID4gNjAgJiYgZGF0ZSA8PSA2MCo2MCl7XHJcbiAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCggZGF0ZS82MCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsgJ+WIhumSn+WJjSdcclxuICAgICAgICB9ZWxzZSBpZihkYXRlID4gNjAqNjAgJiYgZGF0ZSA8PSA2MCo2MCoyNCl7XHJcbiAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQoZGF0ZS82MC82MCk7XHJcbiAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nXHJcbiAgICAgICAgfWVsc2UgaWYoZGF0ZSA+IDYwKjYwKjI0ICYmIGRhdGUgPD0gNjAqNjAqMjQqMzApe1xyXG4gICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQoZGF0ZS82MC82MC8yNCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSdcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgeWVhciA9IGRhdGVTb3VyY2UuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgbW9udGggPSBkYXRlU291cmNlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIGRheSA9IGRhdGVTb3VyY2UuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgIGhvdXIgPSBkYXRlU291cmNlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIG1pbnV0ZSA9IGRhdGVTb3VyY2UuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICB3aG9sZURhdGUgPSAoeWVhciArICcvJyArIG1vbnRoICsgJy8nICsgZGF5ICsgJy8nICsgJyAnICsgaG91ciArICfml7YnICsgbWludXRlICsgJ+WIhicpO1xyXG4gICAgICAgICAgICByZXR1cm4gd2hvbGVEYXRlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3Rlbk1vcmVOZXdzQnRuTXMgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHBhZ2VzID0gMTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn6LeR6L+H5p2lJyk7XHJcbiAgICBzZWxmLmxvYWRNb3JCdG5NUy5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnMicpO1xyXG4gICAgICAgIHlvdXJhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9uZXdzX2xpc3QnLFxyXG4gICAgICAgICAgICAnZGF0YSc6eydwJzpwYWdlc30sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhLm1lc3NhZ2UnLHJlc3VsdC5kYXRhLm5ld3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhLm1lc3NhZ2UnLHJlc3VsdC5kYXRhLm5ld3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhcyA9IHJlc3VsdFsnZGF0YSddWyduZXdzJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB0ZW1wbGF0ZSgndGVtcGxhdGVfZWFjaCcseyduZXdzZXMnOmRhdGFzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i3kXRlbXAnLHRlbXApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbGlzdFVybHPopoHmlL7lnKhhamF45Lit6I635Y+W5omN5pyJ5pWIXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RVcmxzID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0VXJscy5hcHBlbmQodGVtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXMgKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcblxyXG5OZXdzLnByb3RvdHlwZS5SdW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5nZXRUaW1lRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuY29tbWVudEltbWVkaWF0ZWx5KCk7XHJcbiAgICB0aGlzLmxpc3Rlbk1vcmVOZXdzQnRuTXMoKTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICBuZXdzLlJ1bigpO1xyXG59KTsiXX0=
