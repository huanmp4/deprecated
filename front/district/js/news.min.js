function News(){this.commentImmediately=$("#submit-immediately"),this.loadMorBtnMS=$("#load-more-btn")}News.prototype.listencommentImmediately=function(){var s=this;s.commentImmediately.click(function(e){e.preventDefault();var t=s.commentImmediately.parent().attr("data-news-id"),n=s.commentImmediately.parent().attr("data-news-author"),a=s.commentImmediately.parent().parent().find('textarea[name="comment"]').val(),o=$(".comment-list");console.log("pk",t),console.log("author",n),console.log("text_value",a),yourajax.post({url:"/news/news_comment",data:{news:t,author:n,comment:a},success:function(e){if(200===e.code){console.log(e.data);var t=e.data;window.messageBox.show("success");var n=template("comment-template",{comments:t});o.prepend(n)}}})})},News.prototype.getTimeEvent=function(){template.defaults.imports.time_since=function(e){var t=new Date(e),n=t.getTime(),a=((new Date).getTime()-n)/1e3;return console.log("date",a),a<=60?"刚刚":60<a&&a<=3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<a&&a<=86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<a&&a<=2592e3?(days=parseInt(a/60/60/24),days+"天前"):(year=t.getFullYear(),month=t.getMonth(),day=t.getDay(),hour=t.getHours(),minute=t.getMinutes(),wholeDate=year+"/"+month+"/"+day+"/ "+hour+"时"+minute+"分",wholeDate)}},News.prototype.listenMoreNewsBtnMs=function(){var a=1;console.log("跑过来"),this.loadMorBtnMS.click(function(e){e.preventDefault(),yourajax.get({url:"/news/news_list",data:{p:a},success:function(e){if(200===e.code){console.log("data.message",e.data.news),console.log("data.message",e.data.news);var t=e.data.news,n=template("template_each",{newses:t});$(".list-inner-group").append(n),a+=1}}})})},News.prototype.Run=function(){this.getTimeEvent(),this.listencommentImmediately(),this.listenMoreNewsBtnMs()},$(function(){(new News).Run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJjb21tZW50SW1tZWRpYXRlbHkiLCIkIiwibG9hZE1vckJ0bk1TIiwicHJvdG90eXBlIiwibGlzdGVuY29tbWVudEltbWVkaWF0ZWx5Iiwic2VsZiIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwicGFyZW50IiwiYXR0ciIsImF1dGhvciIsImNvbW1lbnQiLCJmaW5kIiwidmFsIiwiY29tbWVudFVsTGlzdCIsImNvbnNvbGUiLCJsb2ciLCJ5b3VyYWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwibmV3cyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb21tZW50cyIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93IiwidGVtcCIsInRlbXBsYXRlIiwicHJlcGVuZCIsImdldFRpbWVFdmVudCIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVfc2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlU291cmNlIiwiRGF0ZSIsImRhdGVUaW1lc3RhbXAiLCJnZXRUaW1lIiwiZGF0ZSIsIm1pbnV0ZXMiLCJwYXJzZUludCIsImhvdXJzIiwiZGF5cyIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXkiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGUiLCJnZXRNaW51dGVzIiwid2hvbGVEYXRlIiwibGlzdGVuTW9yZU5ld3NCdG5NcyIsInBhZ2VzIiwiZ2V0IiwicCIsImRhdGFzIiwibmV3c2VzIiwiYXBwZW5kIiwiUnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUNMQyxLQUFLQyxtQkFBcUJDLEVBQUUsdUJBQzVCRixLQUFLRyxhQUFlRCxFQUFFLGtCQU0xQkgsS0FBS0ssVUFBVUMseUJBQTJCLFdBQ3RDLElBQUlDLEVBQU9OLEtBQ1hNLEVBQUtMLG1CQUFtQk0sTUFBTSxTQUFTQyxHQUNuQ0EsRUFBTUMsaUJBQ04sSUFBSUMsRUFBSUosRUFBS0wsbUJBQW1CVSxTQUFTQyxLQUFLLGdCQUMxQ0MsRUFBUVAsRUFBS0wsbUJBQW1CVSxTQUFTQyxLQUFLLG9CQUU5Q0UsRUFET1IsRUFBS0wsbUJBQW1CVSxTQUFTQSxTQUFTSSxLQUFLLDRCQUN2Q0MsTUFDZkMsRUFBZ0JmLEVBQUUsaUJBQ3RCZ0IsUUFBUUMsSUFBSSxLQUFLVCxHQUNqQlEsUUFBUUMsSUFBSSxTQUFTTixHQUNyQkssUUFBUUMsSUFBSSxhQUFhTCxHQUN6Qk0sU0FBU0MsS0FBSyxDQUNWQyxJQUFNLHFCQUNOQyxLQUFPLENBQUNDLEtBQU9kLEVBQUdHLE9BQVNBLEVBQU9DLFFBQVVBLEdBQzVDVyxRQUFVLFNBQVNDLEdBQ2YsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVSxDQUN2QlIsUUFBUUMsSUFBSU8sRUFBYSxNQUN6QixJQUFJQyxFQUFXRCxFQUFhLEtBQzVCRSxPQUFPQyxXQUFXQyxLQUFLLFdBQ3ZCLElBQUlDLEVBQU9DLFNBQVMsbUJBQW1CLENBQUNMLFNBQVdBLElBQ25EVixFQUFjZ0IsUUFBUUYsVUFTMUNoQyxLQUFLSyxVQUFVOEIsYUFBZSxXQUMxQkYsU0FBU0csU0FBU0MsUUFBUUMsV0FBYSxTQUFTQyxHQUM1QyxJQUFJQyxFQUFhLElBQUlDLEtBQUtGLEdBQ3RCRyxFQUFnQkYsRUFBV0csVUFHM0JDLElBRlEsSUFBSUgsTUFBT0UsVUFFSkQsR0FBaUIsSUFFcEMsT0FEQXZCLFFBQVFDLElBQUksT0FBT3dCLEdBQ2ZBLEdBQVEsR0FDRCxLQUNLLEdBQVBBLEdBQWFBLEdBQVEsTUFDMUJDLFFBQVVDLFNBQVVGLEVBQUssSUFDbEJDLFFBQVUsT0FDTCxLQUFQRCxHQUFnQkEsR0FBUSxPQUM3QkcsTUFBUUQsU0FBU0YsRUFBSyxHQUFHLElBQ2xCRyxNQUFRLE9BQ0gsTUFBUEgsR0FBbUJBLEdBQVEsUUFDaENJLEtBQU9GLFNBQVNGLEVBQUssR0FBRyxHQUFHLElBQ3BCSSxLQUFPLE9BRWRDLEtBQU9ULEVBQVdVLGNBQ2xCQyxNQUFRWCxFQUFXWSxXQUNuQkMsSUFBTWIsRUFBV2MsU0FDakJDLEtBQU9mLEVBQVdnQixXQUNsQkMsT0FBU2pCLEVBQVdrQixhQUNwQkMsVUFBYVYsS0FBTyxJQUFNRSxNQUFRLElBQU1FLElBQU0sS0FBWUUsS0FBTyxJQUFNRSxPQUFTLElBQ3pFRSxhQU1uQjNELEtBQUtLLFVBQVV1RCxvQkFBc0IsV0FDakMsSUFDSUMsRUFBUSxFQUVaMUMsUUFBUUMsSUFBSSxPQUhEbkIsS0FJTkcsYUFBYUksTUFBTSxTQUFTQyxHQUM3QkEsRUFBTUMsaUJBQ05XLFNBQVN5QyxJQUFJLENBQ1R2QyxJQUFNLGtCQUNOQyxLQUFPLENBQUN1QyxFQUFJRixHQUNabkMsUUFBVSxTQUFTQyxHQUNmLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdkJSLFFBQVFDLElBQUksZUFBZU8sRUFBT0gsS0FBS0MsTUFDdkNOLFFBQVFDLElBQUksZUFBZU8sRUFBT0gsS0FBS0MsTUFDdkMsSUFBSXVDLEVBQVFyQyxFQUFhLEtBQVEsS0FDN0JLLEVBQU9DLFNBQVMsZ0JBQWdCLENBQUNnQyxPQUFTRCxJQUUvQjdELEVBQUUscUJBQ1IrRCxPQUFPbEMsR0FDaEI2QixHQUFTLFNBUzdCN0QsS0FBS0ssVUFBVThELElBQU0sV0FDakJsRSxLQUFLa0MsZUFDTGxDLEtBQUtLLDJCQUNMTCxLQUFLMkQsdUJBSVR6RCxFQUFFLFlBQ2EsSUFBSUgsTUFDVm1FIiwiZmlsZSI6Im5ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3cygpe1xyXG4gICAgdGhpcy5jb21tZW50SW1tZWRpYXRlbHkgPSAkKCcjc3VibWl0LWltbWVkaWF0ZWx5Jyk7XHJcbiAgICB0aGlzLmxvYWRNb3JCdG5NUyA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlbmNvbW1lbnRJbW1lZGlhdGVseSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmNvbW1lbnRJbW1lZGlhdGVseS5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgcGsgPXNlbGYuY29tbWVudEltbWVkaWF0ZWx5LnBhcmVudCgpLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG4gICAgICAgIHZhciBhdXRob3IgPXNlbGYuY29tbWVudEltbWVkaWF0ZWx5LnBhcmVudCgpLmF0dHIoJ2RhdGEtbmV3cy1hdXRob3InKTtcclxuICAgICAgICB2YXIgdGV4dCA9IHNlbGYuY29tbWVudEltbWVkaWF0ZWx5LnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJ3RleHRhcmVhW25hbWU9XCJjb21tZW50XCJdJyk7XHJcbiAgICAgICAgdmFyIGNvbW1lbnQgPSB0ZXh0LnZhbCgpO1xyXG4gICAgICAgIHZhciBjb21tZW50VWxMaXN0ID0gJCgnLmNvbW1lbnQtbGlzdCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwaycscGspO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdhdXRob3InLGF1dGhvcik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RleHRfdmFsdWUnLGNvbW1lbnQpO1xyXG4gICAgICAgIHlvdXJhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL25ld3MvbmV3c19jb21tZW50JyxcclxuICAgICAgICAgICAgJ2RhdGEnOnsnbmV3cyc6cGssJ2F1dGhvcic6YXV0aG9yLCdjb21tZW50Jzpjb21tZW50fSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0WydkYXRhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50cyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ3N1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHRlbXBsYXRlKCdjb21tZW50LXRlbXBsYXRlJyx7J2NvbW1lbnRzJzpjb21tZW50c30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRVbExpc3QucHJlcGVuZCh0ZW1wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcblxyXG5OZXdzLnByb3RvdHlwZS5nZXRUaW1lRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lX3NpbmNlID0gZnVuY3Rpb24oZGF0ZVZhbHVlKXtcclxuICAgICAgICB2YXIgZGF0ZVNvdXJjZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgdmFyIGRhdGVUaW1lc3RhbXAgPSBkYXRlU291cmNlLmdldFRpbWUoKTtcclxuICAgICAgICB2YXIgdGltZSA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcblxyXG4gICAgICAgIHZhciBkYXRlID0gKHRpbWUgLSBkYXRlVGltZXN0YW1wKSAvIDEwMDA7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2RhdGUnLGRhdGUpO1xyXG4gICAgICAgIGlmIChkYXRlIDw9IDYwKXtcclxuICAgICAgICAgICAgcmV0dXJuICfliJrliJonXHJcbiAgICAgICAgfWVsc2UgaWYoZGF0ZSA+IDYwICYmIGRhdGUgPD0gNjAqNjApe1xyXG4gICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQoIGRhdGUvNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gbWludXRlcyArICfliIbpkp/liY0nXHJcbiAgICAgICAgfWVsc2UgaWYoZGF0ZSA+IDYwKjYwICYmIGRhdGUgPD0gNjAqNjAqMjQpe1xyXG4gICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KGRhdGUvNjAvNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gaG91cnMgKyAn5bCP5pe25YmNJ1xyXG4gICAgICAgIH1lbHNlIGlmKGRhdGUgPiA2MCo2MCoyNCAmJiBkYXRlIDw9IDYwKjYwKjI0KjMwKXtcclxuICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KGRhdGUvNjAvNjAvMjQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF5cyArICflpKnliY0nXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHllYXIgPSBkYXRlU291cmNlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIG1vbnRoID0gZGF0ZVNvdXJjZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICBkYXkgPSBkYXRlU291cmNlLmdldERheSgpO1xyXG4gICAgICAgICAgICBob3VyID0gZGF0ZVNvdXJjZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBtaW51dGUgPSBkYXRlU291cmNlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgd2hvbGVEYXRlID0gKHllYXIgKyAnLycgKyBtb250aCArICcvJyArIGRheSArICcvJyArICcgJyArIGhvdXIgKyAn5pe2JyArIG1pbnV0ZSArICfliIYnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdob2xlRGF0ZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5Nb3JlTmV3c0J0bk1zID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBwYWdlcyA9IDE7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+i3kei/h+adpScpO1xyXG4gICAgc2VsZi5sb2FkTW9yQnRuTVMuY2xpY2soZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgeW91cmFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL25ld3NfbGlzdCcsXHJcbiAgICAgICAgICAgICdkYXRhJzp7J3AnOnBhZ2VzfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEubWVzc2FnZScscmVzdWx0LmRhdGEubmV3cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEubWVzc2FnZScscmVzdWx0LmRhdGEubmV3cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzID0gcmVzdWx0WydkYXRhJ11bJ25ld3MnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHRlbXBsYXRlKCd0ZW1wbGF0ZV9lYWNoJyx7J25ld3Nlcyc6ZGF0YXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL2xpc3RVcmxz6KaB5pS+5ZyoYWpheOS4reiOt+WPluaJjeacieaViFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0VXJscyA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFVybHMuYXBwZW5kKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcblxyXG5cclxuTmV3cy5wcm90b3R5cGUuUnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuZ2V0VGltZUV2ZW50KCk7XHJcbiAgICB0aGlzLmxpc3RlbmNvbW1lbnRJbW1lZGlhdGVseSgpO1xyXG4gICAgdGhpcy5saXN0ZW5Nb3JlTmV3c0J0bk1zKCk7XHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbigpe1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5SdW4oKTtcclxufSk7Il19
