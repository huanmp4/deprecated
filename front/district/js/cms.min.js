function CMS(){this.thumbnail=$("#thumbnail-btn"),this.progressGroup=$("#progress-group"),this.buttonComplete=$("#thumbnail-btn-cancel"),this.progress=$(".progress"),this.releaseNewsBtn=$("#release-news-button")}CMS.prototype.listenReleaseBTN=function(){this.releaseNewsBtn.click(function(e){e.preventDefault();var t=$("#title-news").val(),o=$("#option-control"),r=o.val(),s=$('#option-control option[value="'+o+'"]').text(),n=window.ue.getContent(),l=CMS.thumbnail.val();console.log("title",t),console.log("category_text",s),console.log("category",o),console.log("content",n),console.log("thumbnail",l);var i={border:"#ced4da solid 1px"};o.css(i),o.css(i),404===parseInt(r)?(o.css({border:"red solid 1px"}),window.messageBox.showError("请选择分类")):yourajax.post({url:"/cms/release_news",data:{title:t,category:r,content:n,thumbnail:l},success:function(e){200===e.code&&(alertBox.alertSuccess("已完成"),console.log("成功",e),console.log("成功",e),console.log("成功",e))}})})},CMS.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameWidth:"100%",serverUrl:"/ueditor/upload/",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","drafts","help"]]})},CMS.prototype.listThumbnailUploadToLocal=function(){var o=this;o.thumbnail.change(function(){console.log("点击图片上传本地");var e=o.thumbnail[0].files[0],t=new FormData;t.append("file",e),console.log("file",t),yourajax.post({url:"/cms/image_upload_to_local",processData:!1,contentType:!1,data:t,success:function(e){if(200===e.code){var t=e.data.url;$("#picture").val(t)}}})})},CMS.prototype.listenThumbnailUploadEvent=function(){var c=this;c.thumbnail.change(function(){var n=this.files[0],l=(new Date).getTime()+"."+n.name.split(".")[1],i={fname:l,params:{},mimeType:null},a={useCndDomain:!0,retryCount:6,region:qiniu.region.z2};yourajax.get({url:"/cms/thumbnail_process",success:function(e){if(200===e.code){var t=e.data.token,o=qiniu.upload(n,l,t,i,a);console.log("observable",o);var r=$(".progress"),s=CMS.progressGroup;c.buttonComplete.text("取消"),c.buttonComplete.removeClass("btn-info"),c.buttonComplete.removeClass("btn-dark"),c.buttonComplete.addClass("btn-danger"),s.show(),r.show(),c.subscription=o.subscribe({next:c.handleFileUploadProcess,error:c.handleFileErrorProcess,complete:c.handleFileComplete})}}})})},CMS.prototype.listenCancelsubscription=function(){var t=this;t.buttonComplete.click(function(e){e.preventDefault(),t.subscription.unsubscribe(),t.progress.hide()})},CMS.prototype.handleFileUploadProcess=function(e){var t=this,o=e.total;console.log("precent",o);var r=o.percent,s=parseFloat(r).toFixed(2),n=parseInt(s)+"%";t.progressBar=$(".progress-bar"),t.progressBar.css({width:n}),t.progressBar.text("已完成"+s+"%")},CMS.prototype.handleFileErrorProcess=function(e){console.log("error",e),window.messageBox.show(e)},CMS.prototype.handleFileComplete=function(e){console.log("complete_response",e);var t=$("#thumbnail-btn-cancel");$(".progress").hide(),t.removeClass("btn-danger"),t.addClass("btn-info"),t.text("已完成"),this.progressBar.css({width:0}),console.log("完成");var o=CMS.thumbnail,r="http://q1wvz08zi.bkt.clouddn.com/"+e.key;o.val(r),window.messageBox.show("已完成")},CMS.prototype.Run=function(){this.listThumbnailUploadToLocal(),this.listenCancelsubscription(),this.listenReleaseBTN(),this.initUeditor()},$(function(){(new CMS).Run(),CMS.progressGroup=$("#progress-group"),CMS.thumbnail=$("#picture")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtcy5qcyJdLCJuYW1lcyI6WyJDTVMiLCJ0aGlzIiwidGh1bWJuYWlsIiwiJCIsInByb2dyZXNzR3JvdXAiLCJidXR0b25Db21wbGV0ZSIsInByb2dyZXNzIiwicmVsZWFzZU5ld3NCdG4iLCJwcm90b3R5cGUiLCJsaXN0ZW5SZWxlYXNlQlROIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJ2YWwiLCJjYXRlZ29yeSIsImNhdGVnb3J5X3ZhbCIsImNhdGVnb3J5X3RleHQiLCJ0ZXh0IiwiY29udGVudCIsIndpbmRvdyIsInVlIiwiZ2V0Q29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJib3JkZXJfd2hpdGUiLCJib3JkZXIiLCJjc3MiLCJwYXJzZUludCIsIm1lc3NhZ2VCb3giLCJzaG93RXJyb3IiLCJ5b3VyYWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImFsZXJ0Qm94IiwiYWxlcnRTdWNjZXNzIiwiaW5pdFVlZGl0b3IiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZVdpZHRoIiwic2VydmVyVXJsIiwidG9vbGJhcnMiLCJsaXN0VGh1bWJuYWlsVXBsb2FkVG9Mb2NhbCIsInNlbGYiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImxpc3RlblRodW1ibmFpbFVwbG9hZEV2ZW50Iiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VDbmREb21haW4iLCJyZXRyeUNvdW50IiwicmVnaW9uIiwicWluaXUiLCJ6MiIsImdldCIsInRva2VuIiwib2JzZXJ2YWJsZSIsInVwbG9hZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJzaG93Iiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlIiwibmV4dCIsImhhbmRsZUZpbGVVcGxvYWRQcm9jZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlRXJyb3JQcm9jZXNzIiwiY29tcGxldGUiLCJoYW5kbGVGaWxlQ29tcGxldGUiLCJsaXN0ZW5DYW5jZWxzdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsImhpZGUiLCJyZXNwb25zZSIsInRvdGFsIiwicGVyY2VudF90ZW1wIiwicGVyY2VudCIsInBlcmNlbnRGbG9hdCIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwicGVyY2VudEludCIsInByb2dyZXNzQmFyIiwid2lkdGgiLCJ0aHVtYm5haWxDYW5jZWxCdG4iLCJSdW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE1BR0xDLEtBQUtDLFVBQVlDLEVBQUUsa0JBQ25CRixLQUFLRyxjQUFnQkQsRUFBRSxtQkFDdkJGLEtBQUtJLGVBQWlCRixFQUFFLHlCQUN4QkYsS0FBS0ssU0FBV0gsRUFBRSxhQUNsQkYsS0FBS00sZUFBaUJKLEVBQUUsd0JBUTVCSCxJQUFJUSxVQUFVQyxpQkFBbUIsV0FDbEJSLEtBQ05NLGVBQWVHLE1BQU0sU0FBVUMsR0FDaENBLEVBQU1DLGlCQUNOLElBQUlDLEVBQVFWLEVBQUUsZUFBZVcsTUFDekJDLEVBQVdaLEVBQUUsbUJBQ2JhLEVBQWVELEVBQVNELE1BQ3hCRyxFQUFnQmQsRUFBRSxpQ0FBaUNZLEVBQVMsTUFBTUcsT0FDbEVDLEVBQVVDLE9BQU9DLEdBQUdDLGFBQ3BCcEIsRUFBWUYsSUFBSUUsVUFBVVksTUFDOUJTLFFBQVFDLElBQUksUUFBUVgsR0FDcEJVLFFBQVFDLElBQUksZ0JBQWdCUCxHQUM1Qk0sUUFBUUMsSUFBSSxXQUFXVCxHQUN2QlEsUUFBUUMsSUFBSSxVQUFVTCxHQUN0QkksUUFBUUMsSUFBSSxZQUFZdEIsR0FDeEIsSUFBSXVCLEVBQWEsQ0FBQ0MsT0FBUyxxQkFFM0JYLEVBQVNZLElBQUlGLEdBQWNWLEVBQVNZLElBQUlGLEdBQ1QsTUFBM0JHLFNBQVNaLElBQ1RELEVBQVNZLElBSEUsQ0FB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LFFBQVFDLElBQUksTUFDWixJQUFJdEIsRUFBWUYsSUFBSUUsVUFFaEIrQixFQURTLG9DQUNNd0QsRUFBU2pDLElBQzVCdEQsRUFBVVksSUFBSW1CLEdBQ2RiLE9BQU9TLFdBQVdnRCxLQUFLLFFBTzNCN0UsSUFBSVEsVUFBVTRGLElBQU0sV0FJaEJuRyxLQUFLNEMsNkJBQ0w1QyxLQUFLcUYsMkJBQ0xyRixLQUFLUSxtQkFDTFIsS0FBS3NDLGVBR1RwQyxFQUFFLFlBQ1ksSUFBSUgsS0FDVm9HLE1BQ0pwRyxJQUFJSSxjQUFnQkQsRUFBRSxtQkFDdEJILElBQUlFLFVBQVlDLEVBQUUiLCJmaWxlIjoiY21zLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIENNUygpe1xyXG5cclxuXHJcbiAgICB0aGlzLnRodW1ibmFpbCA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbiAgICB0aGlzLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxuICAgIHRoaXMuYnV0dG9uQ29tcGxldGUgPSAkKCcjdGh1bWJuYWlsLWJ0bi1jYW5jZWwnKTtcclxuICAgIHRoaXMucHJvZ3Jlc3MgPSAkKCcucHJvZ3Jlc3MnKTtcclxuICAgIHRoaXMucmVsZWFzZU5ld3NCdG4gPSAkKCcjcmVsZWFzZS1uZXdzLWJ1dHRvbicpO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuLy/mj5DkuqTlj5HooajmlrDpl7vooajljZVcclxuQ01TLnByb3RvdHlwZS5saXN0ZW5SZWxlYXNlQlROID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnJlbGVhc2VOZXdzQnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gJCgnI3RpdGxlLW5ld3MnKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKCcjb3B0aW9uLWNvbnRyb2wnKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfdmFsID0gY2F0ZWdvcnkudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X3RleHQgPSAkKCcjb3B0aW9uLWNvbnRyb2wgb3B0aW9uW3ZhbHVlPVwiJytjYXRlZ29yeSsnXCJdJykudGV4dCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gQ01TLnRodW1ibmFpbC52YWwoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygndGl0bGUnLHRpdGxlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY2F0ZWdvcnlfdGV4dCcsY2F0ZWdvcnlfdGV4dCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhdGVnb3J5JyxjYXRlZ29yeSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0aHVtYm5haWwnLHRodW1ibmFpbCk7XHJcbiAgICAgICAgdmFyIGJvcmRlcl93aGl0ZT17J2JvcmRlcic6JyNjZWQ0ZGEgc29saWQgMXB4J307XHJcbiAgICAgICAgdmFyIGJvcmRlcl9yZWQ9eydib3JkZXInOidyZWQgc29saWQgMXB4J307XHJcbiAgICAgICAgY2F0ZWdvcnkuY3NzKGJvcmRlcl93aGl0ZSk7Y2F0ZWdvcnkuY3NzKGJvcmRlcl93aGl0ZSk7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KGNhdGVnb3J5X3ZhbCkgPT09IDQwNCl7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5LmNzcyhib3JkZXJfcmVkKTtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKCfor7fpgInmi6nliIbnsbsnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgeW91cmFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvcmVsZWFzZV9uZXdzJyxcclxuICAgICAgICAgICAgICAgICdkYXRhJzogeyd0aXRsZSc6IHRpdGxlLCAnY2F0ZWdvcnknOiBjYXRlZ29yeV92YWwsICdjb250ZW50JzogY29udGVudCwgJ3RodW1ibmFpbCc6IHRodW1ibmFpbH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydEJveC5hbGVydFN1Y2Nlc3MoJ+W3suWujOaIkCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oiQ5YqfJywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aIkOWKnycsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmiJDlip8nLCByZXN1bHQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcblxyXG4vL3VlZGl0b3JcclxuQ01TLnByb3RvdHlwZS5pbml0VWVkaXRvciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicse1xyXG4gICAgICAgICdpbml0aWFsRnJhbWVXaWR0aCc6JzEwMCUnLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOicvdWVkaXRvci91cGxvYWQvJyxcclxuICAgICAgICAndG9vbGJhcnMnOltbXHJcbiAgICAgICAgICAgICdmdWxsc2NyZWVuJywnc291cmNlJywgJ3wnLCAndW5kbycsICdyZWRvJywgJ3wnLFxyXG4gICAgICAgICAgICAnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ2ZvbnRib3JkZXInLCAnc3RyaWtldGhyb3VnaCcsICdzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnLCAncmVtb3ZlZm9ybWF0JywgJ2Zvcm1hdG1hdGNoJywgJ2F1dG90eXBlc2V0JywgJ2Jsb2NrcXVvdGUnLCAncGFzdGVwbGFpbicsICd8JywgJ2ZvcmVjb2xvcicsICdiYWNrY29sb3InLCAnaW5zZXJ0b3JkZXJlZGxpc3QnLCAnaW5zZXJ0dW5vcmRlcmVkbGlzdCcsICdzZWxlY3RhbGwnLCAnY2xlYXJkb2MnLCAnfCcsXHJcbiAgICAgICAgICAgICdyb3dzcGFjaW5ndG9wJywgJ3Jvd3NwYWNpbmdib3R0b20nLCAnbGluZWhlaWdodCcsICd8JyxcclxuICAgICAgICAgICAgJ2N1c3RvbXN0eWxlJywgJ3BhcmFncmFwaCcsICdmb250ZmFtaWx5JywgJ2ZvbnRzaXplJywgJ3wnLFxyXG4gICAgICAgICAgICAnZGlyZWN0aW9uYWxpdHlsdHInLCAnZGlyZWN0aW9uYWxpdHlydGwnLCAnaW5kZW50JywgJ3wnLFxyXG4gICAgICAgICAgICAnanVzdGlmeWxlZnQnLCAnanVzdGlmeWNlbnRlcicsICdqdXN0aWZ5cmlnaHQnLCAnanVzdGlmeWp1c3RpZnknLCAnfCcsICd0b3VwcGVyY2FzZScsICd0b2xvd2VyY2FzZScsICd8JyxcclxuICAgICAgICAgICAgJ2xpbmsnLCAndW5saW5rJywgJ2FuY2hvcicsICd8JywgJ2ltYWdlbm9uZScsICdpbWFnZWxlZnQnLCAnaW1hZ2VyaWdodCcsICdpbWFnZWNlbnRlcicsICd8JyxcclxuICAgICAgICAgICAgJ3NpbXBsZXVwbG9hZCcsICdpbnNlcnRpbWFnZScsICdlbW90aW9uJywgJ3NjcmF3bCcsICdpbnNlcnR2aWRlbycsICdtdXNpYycsICdhdHRhY2htZW50JywgJ21hcCcsICdnbWFwJywgJ2luc2VydGZyYW1lJywgJ2luc2VydGNvZGUnLCAnd2ViYXBwJywgJ3BhZ2VicmVhaycsICd0ZW1wbGF0ZScsICdiYWNrZ3JvdW5kJywgJ3wnLFxyXG4gICAgICAgICAgICAnaG9yaXpvbnRhbCcsICdkYXRlJywgJ3RpbWUnLCAnc3BlY2hhcnMnLCAnc25hcHNjcmVlbicsICd3b3JkaW1hZ2UnLCAnfCcsXHJcbiAgICAgICAgICAgICdpbnNlcnR0YWJsZScsICdkZWxldGV0YWJsZScsICdpbnNlcnRwYXJhZ3JhcGhiZWZvcmV0YWJsZScsICdpbnNlcnRyb3cnLCAnZGVsZXRlcm93JywgJ2luc2VydGNvbCcsICdkZWxldGVjb2wnLCAnbWVyZ2VjZWxscycsICdtZXJnZXJpZ2h0JywgJ21lcmdlZG93bicsICdzcGxpdHRvY2VsbHMnLCAnc3BsaXR0b3Jvd3MnLCAnc3BsaXR0b2NvbHMnLCAnY2hhcnRzJywgJ3wnLFxyXG4gICAgICAgICAgICAncHJpbnQnLCAncHJldmlldycsICdzZWFyY2hyZXBsYWNlJywgJ2RyYWZ0cycsJ2hlbHAnXHJcbiAgICAgICAgXV1cclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuLy/ojrflj5bmlrDpl7vlj5HluINcclxuXHJcblxyXG4vL+WbvueJh+S4iuS8oOacrOWcsFxyXG5DTVMucHJvdG90eXBlLmxpc3RUaHVtYm5haWxVcGxvYWRUb0xvY2FsID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYudGh1bWJuYWlsLmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vlm77niYfkuIrkvKDmnKzlnLAnKTtcclxuICAgICAgICAvLyB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgLy8gdmFyIGtleSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgJy4nICtmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICB2YXIgZmlsZSA9IHNlbGYudGh1bWJuYWlsWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsZmlsZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbGUnLGZvcm1EYXRhKTtcclxuICAgICAgICB5b3VyYWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvaW1hZ2VfdXBsb2FkX3RvX2xvY2FsJyxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzpmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzpmYWxzZSxcclxuICAgICAgICAgICAgJ2RhdGEnOmZvcm1EYXRhLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50W1wiY29kZVwiXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZXZlbnRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBpY3R1cmUgPSAkKCcjcGljdHVyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBpY3R1cmUudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcblxyXG4vL+e8qeeVpeWbvuS4iuS8oOS4g+eJm+S6keS4u+eoi+W6j1xyXG5DTVMucHJvdG90eXBlLmxpc3RlblRodW1ibmFpbFVwbG9hZEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYudGh1bWJuYWlsLmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB2YXIga2V5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkrJy4nK2ZpbGUubmFtZS5zcGxpdCgnLicpWzFdO1xyXG4gICAgICAgIHZhciBwdXRFeHRyYSA9IHtcclxuICAgICAgICAgICAgZm5hbWU6a2V5LFxyXG4gICAgICAgICAgICBwYXJhbXM6e30sXHJcbiAgICAgICAgICAgIG1pbWVUeXBlOm51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgICAgIHVzZUNuZERvbWFpbjp0cnVlLFxyXG4gICAgICAgICAgICByZXRyeUNvdW50OjYuMDAsXHJcbiAgICAgICAgICAgIHJlZ2lvbjpxaW5pdS5yZWdpb24uejJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHlvdXJhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvY21zL3RodW1ibmFpbF9wcm9jZXNzJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSxrZXksdG9rZW4scHV0RXh0cmEsY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb2JzZXJ2YWJsZScsb2JzZXJ2YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gJCgnLnByb2dyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzR3JvdXAgPSBDTVMucHJvZ3Jlc3NHcm91cDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmJ1dHRvbkNvbXBsZXRlLnRleHQoJ+WPlua2iCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYnV0dG9uQ29tcGxldGUucmVtb3ZlQ2xhc3MoJ2J0bi1pbmZvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5idXR0b25Db21wbGV0ZS5yZW1vdmVDbGFzcygnYnRuLWRhcmsnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmJ1dHRvbkNvbXBsZXRlLmFkZENsYXNzKCdidG4tZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6c2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvY2VzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzpzZWxmLmhhbmRsZUZpbGVFcnJvclByb2Nlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb21wbGV0ZSc6c2VsZi5oYW5kbGVGaWxlQ29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG4vL+S4g+eJm+S4iuS8oOWPlua2iOebkeWQrFxyXG5DTVMucHJvdG90eXBlLmxpc3RlbkNhbmNlbHN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJ1dHRvbkNvbXBsZXRlLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgc2VsZi5wcm9ncmVzcy5oaWRlKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy/kuIPniZvkuIrkvKDlpITnkIbkuK1cclxuQ01TLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkUHJvY2VzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsO1xyXG4gICAgY29uc29sZS5sb2coJ3ByZWNlbnQnLHRvdGFsKTtcclxuICAgIHZhciBwZXJjZW50X3RlbXAgPSB0b3RhbC5wZXJjZW50O1xyXG4gICAgdmFyIHByZWNlbnRJbnQgPSBwYXJzZUZsb2F0KHBlcmNlbnRfdGVtcCk7XHJcbiAgICB2YXIgcGVyY2VudEZsb2F0ID0gcHJlY2VudEludC50b0ZpeGVkKDIpO1xyXG4gICAgdmFyIHBlcmNlbnRJbnQgPSBwYXJzZUludChwZXJjZW50RmxvYXQpKyclJztcclxuICAgIHNlbGYucHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICBzZWxmLnByb2dyZXNzQmFyLmNzcyh7J3dpZHRoJzpwZXJjZW50SW50fSk7XHJcbiAgICBzZWxmLnByb2dyZXNzQmFyLnRleHQoJ+W3suWujOaIkCcrcGVyY2VudEZsb2F0KyclJylcclxufTtcclxuXHJcbi8v5LiD54mb5LiK5Lyg6ZSZ6K+vXHJcbkNNUy5wcm90b3R5cGUuaGFuZGxlRmlsZUVycm9yUHJvY2VzcyA9IGZ1bmN0aW9uKGVycm9yKXtcclxuICAgIGNvbnNvbGUubG9nKCdlcnJvcicsZXJyb3IpO1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhlcnJvcik7XHJcbn07XHJcblxyXG4vL+S4g+eJm+S4iuS8oOWujOaIkFxyXG5DTVMucHJvdG90eXBlLmhhbmRsZUZpbGVDb21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIGNvbnNvbGUubG9nKCdjb21wbGV0ZV9yZXNwb25zZScscmVzcG9uc2UpO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRodW1ibmFpbENhbmNlbEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuLWNhbmNlbCcpO1xyXG4gICAgdmFyIHByb2dyZXNzID0gJCgnLnByb2dyZXNzJyk7XHJcbiAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICB0aHVtYm5haWxDYW5jZWxCdG4ucmVtb3ZlQ2xhc3MoJ2J0bi1kYW5nZXInKTtcclxuICAgIHRodW1ibmFpbENhbmNlbEJ0bi5hZGRDbGFzcygnYnRuLWluZm8nKTtcclxuICAgIHRodW1ibmFpbENhbmNlbEJ0bi50ZXh0KCflt7LlrozmiJAnKTtcclxuICAgIHNlbGYucHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOjB9KTtcclxuICAgIGNvbnNvbGUubG9nKCflrozmiJAnKTtcclxuICAgIHZhciB0aHVtYm5haWwgPSBDTVMudGh1bWJuYWlsO1xyXG4gICAgdmFyIGRvbWFpbiA9ICdodHRwOi8vcTF3dnowOHppLmJrdC5jbG91ZGRuLmNvbS8nO1xyXG4gICAgdmFyIHVybCA9IGRvbWFpbiArIHJlc3BvbnNlLmtleTtcclxuICAgIHRodW1ibmFpbC52YWwodXJsKTtcclxuICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+W3suWujOaIkCcpXHJcbn07XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcblxyXG5DTVMucHJvdG90eXBlLlJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAvL+WPlua2iOS4iuS8oOWbvuWIsOS4g+eJm+WOu1xyXG4gICAgLy8gdGhpcy5saXN0ZW5UaHVtYm5haWxVcGxvYWRFdmVudCgpO1xyXG4gICAgLy/lm77kuIrkvKDmnKzlnLBcclxuICAgIHRoaXMubGlzdFRodW1ibmFpbFVwbG9hZFRvTG9jYWwoKTtcclxuICAgIHRoaXMubGlzdGVuQ2FuY2Vsc3Vic2NyaXB0aW9uKCk7XHJcbiAgICB0aGlzLmxpc3RlblJlbGVhc2VCVE4oKTtcclxuICAgIHRoaXMuaW5pdFVlZGl0b3IoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24oKXtcclxuICAgIHZhciBjbXMgPSBuZXcgQ01TKCk7XHJcbiAgICBjbXMuUnVuKCk7XHJcbiAgICBDTVMucHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xyXG4gICAgQ01TLnRodW1ibmFpbCA9ICQoJyNwaWN0dXJlJyk7XHJcbn0pOyJdfQ==
